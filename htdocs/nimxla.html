<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>nimxla</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">nimxla</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Buffer"
    title="Buffer = ref BufferObj">Buffer</a></li>
  <li><a class="reference" href="#Client"
    title="Client = ref ClientObj">Client</a></li>
  <li><a class="reference" href="#Executable"
    title="Executable = object
  name*: string
  params*: seq[string]
  inShapes*: seq[Shape]
  outShape*: Shape
  c: pjrt_loaded_executable">Executable</a></li>
  <li><a class="reference" href="#LogLevel"
    title="LogLevel = enum
  Info, Warning, Error, Fatal">LogLevel</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">$
      <li><a class="reference" href="#%24%2CBuffer"
    title="`$`(buf: Buffer): string">`$`(buf: Buffer): string</a></li>
  <li><a class="reference" href="#%24%2CClient"
    title="`$`(client: Client): string">`$`(client: Client): string</a></li>
  <li><a class="reference" href="#%24%2CExecutable"
    title="`$`(exec: Executable): string">`$`(exec: Executable): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">compile
      <li><a class="reference" href="#compile%2CClient%2CComputation"
    title="compile(client: Client; comp: Computation): Executable">compile(client: Client; comp: Computation): Executable</a></li>

  </ul>
  <ul class="simple nested-toc-section">deviceCount
      <li><a class="reference" href="#deviceCount%2CClient"
    title="deviceCount(client: Client): int">deviceCount(client: Client): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">newBuffer
      <li><a class="reference" href="#newBuffer%2CClient%2CLiteral%2Cint"
    title="newBuffer(client: Client; lit: Literal; device = 0): Buffer">newBuffer(client: Client; lit: Literal; device = 0): Buffer</a></li>
  <li><a class="reference" href="#newBuffer%2CClient%2CTensor%5BT%3A%20ElemType%5D%2Cint"
    title="newBuffer[T: ElemType](client: Client; t: Tensor[T]; device = 0): Buffer">newBuffer[T: ElemType](client: Client; t: Tensor[T]; device = 0): Buffer</a></li>

  </ul>
  <ul class="simple nested-toc-section">newCPUClient
      <li><a class="reference" href="#newCPUClient"
    title="newCPUClient(logLevel = Warning): Client">newCPUClient(logLevel = Warning): Client</a></li>

  </ul>
  <ul class="simple nested-toc-section">newGPUClient
      <li><a class="reference" href="#newGPUClient%2Cfloat"
    title="newGPUClient(memoryFraction = 1.0; preallocate = false; logLevel = Warning): Client">newGPUClient(memoryFraction = 1.0; preallocate = false; logLevel = Warning): Client</a></li>

  </ul>
  <ul class="simple nested-toc-section">newTPUClient
      <li><a class="reference" href="#newTPUClient%2Cint"
    title="newTPUClient(maxInflightComputations: int; logLevel = Warning): Client">newTPUClient(maxInflightComputations: int; logLevel = Warning): Client</a></li>

  </ul>
  <ul class="simple nested-toc-section">platformName
      <li><a class="reference" href="#platformName%2CClient"
    title="platformName(client: Client): string">platformName(client: Client): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">platformVersion
      <li><a class="reference" href="#platformVersion%2CClient"
    title="platformVersion(client: Client): string">platformVersion(client: Client): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">run
      <li><a class="reference" href="#run%2CExecutable"
    title="run(exec: Executable; checkShape = true): Buffer">run(exec: Executable; checkShape = true): Buffer</a></li>
  <li><a class="reference" href="#run%2CExecutable%2CopenArray%5BT%5D"
    title="run[T: Buffer | Literal](exec: Executable; args: openArray[T]; checkShape = true): Buffer">run[T: Buffer | Literal](exec: Executable; args: openArray[T]; checkShape = true): Buffer</a></li>

  </ul>
  <ul class="simple nested-toc-section">runAndUnpack
      <li><a class="reference" href="#runAndUnpack%2CExecutable"
    title="runAndUnpack(exec: Executable; checkShape = true): seq[Buffer]">runAndUnpack(exec: Executable; checkShape = true): seq[Buffer]</a></li>
  <li><a class="reference" href="#runAndUnpack%2CExecutable%2CopenArray%5BT%5D"
    title="runAndUnpack[T: Buffer | Literal](exec: Executable; args: openArray[T];
                                  checkShape = true): seq[Buffer]">runAndUnpack[T: Buffer | Literal](exec: Executable; args: openArray[T];
                                  checkShape = true): seq[Buffer]</a></li>

  </ul>
  <ul class="simple nested-toc-section">setLogLevel
      <li><a class="reference" href="#setLogLevel%2CLogLevel"
    title="setLogLevel(level: LogLevel)">setLogLevel(level: LogLevel)</a></li>

  </ul>
  <ul class="simple nested-toc-section">shape
      <li><a class="reference" href="#shape%2CBuffer"
    title="shape(buf: Buffer): Shape">shape(buf: Buffer): Shape</a></li>

  </ul>
  <ul class="simple nested-toc-section">toLiteral
      <li><a class="reference" href="#toLiteral%2CBuffer"
    title="toLiteral(buf: Buffer): Literal">toLiteral(buf: Buffer): Literal</a></li>

  </ul>
  <ul class="simple nested-toc-section">toLiterals
      <li><a class="reference" href="#toLiterals%2CopenArray%5BBuffer%5D"
    title="toLiterals(buffers: openArray[Buffer]): seq[Literal]">toLiterals(buffers: openArray[Buffer]): seq[Literal]</a></li>

  </ul>
  <ul class="simple nested-toc-section">toTensor
      <li><a class="reference" href="#toTensor%2CBuffer"
    title="toTensor[T: ElemType](buf: Buffer): Tensor[T]">toTensor[T: ElemType](buf: Buffer): Tensor[T]</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>The nimxla module wraps the XLA PJRT CPU and GPU client objects which are used to execute computations on a device. It also handles transferring data to and from the device and utilities to manage this on the host. See <a class="reference external" href="https://www.tensorflow.org/xla">https://www.tensorflow.org/xla</a> for an overview of the XLA library.</p>
<p>It depends on the graph module which contains the functions to define computations from a graph of operation nodes, the tensor utility module and the xla_wrapper module which has the definitaions for the C bindings to the XLA C++ API.</p>
<p>Here's a simple exaxmple to build and executing a graph which squares the elements from a vector and adds a constant. then converts the result to a matrix with column major order. </p>

<p><strong class="examples_text">Example:</strong></p>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">nimxla</span>
<span class="Keyword">import</span> <span class="Identifier">nimxla</span><span class="Operator">/</span><span class="Punctuation">[</span><span class="Identifier">tensor</span><span class="Punctuation">,</span> <span class="Identifier">graph</span><span class="Punctuation">]</span>

<span class="Keyword">let</span> <span class="Identifier">c</span> <span class="Operator">=</span> <span class="Identifier">newCPUClient</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
<span class="Identifier">echo</span> <span class="Identifier">c</span>
<span class="Keyword">let</span> <span class="Identifier">b</span> <span class="Operator">=</span> <span class="Identifier">newBuilder</span><span class="Punctuation">(</span><span class="StringLit">&quot;example&quot;</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">b</span><span class="Operator">.</span><span class="Identifier">parameter</span><span class="Punctuation">(</span><span class="DecNumber">0</span><span class="Punctuation">,</span> <span class="Identifier">F32</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="DecNumber">50</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">sum</span> <span class="Operator">=</span> <span class="Identifier">x</span> <span class="Operator">*</span> <span class="Identifier">x</span> <span class="Operator">+</span> <span class="Identifier">b</span><span class="Operator">.</span><span class="Identifier">constant</span><span class="Punctuation">(</span><span class="DecNumber">10</span><span class="Identifier">f32</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">comp</span> <span class="Operator">=</span> <span class="Identifier">build</span> <span class="Identifier">sum</span><span class="Operator">.</span><span class="Identifier">reshape</span><span class="Punctuation">(</span><span class="DecNumber">10</span><span class="Punctuation">,</span> <span class="DecNumber">5</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">transpose</span>
<span class="Keyword">let</span> <span class="Identifier">exec</span> <span class="Operator">=</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">compile</span><span class="Punctuation">(</span><span class="Identifier">comp</span><span class="Punctuation">)</span>
<span class="Keyword">let</span> <span class="Identifier">input</span> <span class="Operator">=</span> <span class="Identifier">toTensor</span><span class="Punctuation">[</span><span class="Identifier">float32</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="FloatNumber">1.</span><span class="Operator">.</span><span class="DecNumber">50</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">toLiteral</span>
<span class="Keyword">let</span> <span class="Identifier">res</span> <span class="Operator">=</span> <span class="Identifier">exec</span><span class="Operator">.</span><span class="Identifier">run</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Identifier">input</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">toLiteral</span>
<span class="Identifier">echo</span> <span class="Identifier">res</span></pre></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="nimxla/graph.html">nimxla/graph</a>, <a class="reference external" href="nimxla/tensor.html">nimxla/tensor</a>, <a class="reference external" href="nimxla/private/xla_wrapper.html">nimxla/private/xla_wrapper</a>, <a class="reference external" href="nimxla/private/utils.html">nimxla/private/utils</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Buffer">
<dt><pre><a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Identifier">BufferObj</span></pre></dt>
<dd>

Buffer represents the device memory allocated by the client for a given tensor or tuple of tensors.

</dd>
</div>
<div id="Client">
<dt><pre><a href="nimxla.html#Client"><span class="Identifier">Client</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Identifier">ClientObj</span></pre></dt>
<dd>

A client connects to a device such as a CPU or Cuda GPU driver and provides methods to perform computations.

</dd>
</div>
<div id="Executable">
<dt><pre><a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">name</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
  <span class="Identifier">params</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span>
  <span class="Identifier">inShapes</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="nimxla/tensor.html#Shape"><span class="Identifier">Shape</span></a><span class="Other">]</span>
  <span class="Identifier">outShape</span><span class="Operator">*</span><span class="Other">:</span> <a href="nimxla/tensor.html#Shape"><span class="Identifier">Shape</span></a>
  <span class="Identifier">c</span><span class="Other">:</span> <a href="nimxla/private/xla_wrapper.html#pjrt_loaded_executable"><span class="Identifier">pjrt_loaded_executable</span></a>
</pre></dt>
<dd>

An executable is a compiled graph of operations which can be called with a defined list of parameters.

</dd>
</div>
<div id="LogLevel">
<dt><pre><a href="nimxla.html#LogLevel"><span class="Identifier">LogLevel</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Info</span><span class="Other">,</span> <span class="Identifier">Warning</span><span class="Other">,</span> <span class="Identifier">Error</span><span class="Other">,</span> <span class="Identifier">Fatal</span></pre></dt>
<dd>



</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="$,Buffer">
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CBuffer"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">buf</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Print shape info

</dd>
</div>
<div id="$,Client">
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CClient"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Summary of client info

</dd>
</div>
<div id="$,Executable">
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CExecutable"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">exec</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>



</dd>
</div>
<div id="compile,Client,Computation">
<dt><pre><span class="Keyword">proc</span> <a href="#compile%2CClient%2CComputation"><span class="Identifier">compile</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">;</span> <span class="Identifier">comp</span><span class="Other">:</span> <a href="nimxla/graph.html#Computation"><span class="Identifier">Computation</span></a><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">BuilderError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Compile a computation so that it can be executed on this client.

</dd>
</div>
<div id="deviceCount,Client">
<dt><pre><span class="Keyword">proc</span> <a href="#deviceCount%2CClient"><span class="Identifier">deviceCount</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns number of devices associated with this client

</dd>
</div>
<div id="newBuffer,Client,Literal,int">
<dt><pre><span class="Keyword">proc</span> <a href="#newBuffer%2CClient%2CLiteral%2Cint"><span class="Identifier">newBuffer</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">;</span> <span class="Identifier">lit</span><span class="Other">:</span> <a href="nimxla/tensor.html#Literal"><span class="Identifier">Literal</span></a><span class="Other">;</span> <span class="Identifier">device</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">XLAError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Create a new buffer on the device attached to the client and copy source data from a literal value on the host

</dd>
</div>
<div id="newBuffer,Client,Tensor[T: ElemType],int">
<dt><pre><span class="Keyword">proc</span> <a href="#newBuffer%2CClient%2CTensor%5BT%3A%20ElemType%5D%2Cint"><span class="Identifier">newBuffer</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="nimxla/tensor.html#ElemType"><span class="Identifier">ElemType</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <a href="nimxla/tensor.html#Tensor"><span class="Identifier">Tensor</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">device</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a></pre></dt>
<dd>

Create a new buffer on the device attached to the client and copy source data from a tensor value on the host

</dd>
</div>
<div id="newCPUClient">
<dt><pre><span class="Keyword">proc</span> <a href="#newCPUClient"><span class="Identifier">newCPUClient</span></a><span class="Other">(</span><span class="Identifier">logLevel</span> <span class="Other">=</span> <span class="Identifier">Warning</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">XLAError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteEnvEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Create a new client for running computations on the CPU.

</dd>
</div>
<div id="newGPUClient,float">
<dt><pre><span class="Keyword">proc</span> <a href="#newGPUClient%2Cfloat"><span class="Identifier">newGPUClient</span></a><span class="Other">(</span><span class="Identifier">memoryFraction</span> <span class="Other">=</span> <span class="FloatNumber">1.0</span><span class="Other">;</span> <span class="Identifier">preallocate</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">;</span> <span class="Identifier">logLevel</span> <span class="Other">=</span> <span class="Identifier">Warning</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">XLAError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteEnvEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Create a new client for running computations on the GPU using Cuda. memoryFraction limits the maximum fraction of device memory which can be allocated. If preallocate is set then this is allocated at startup.

</dd>
</div>
<div id="newTPUClient,int">
<dt><pre><span class="Keyword">proc</span> <a href="#newTPUClient%2Cint"><span class="Identifier">newTPUClient</span></a><span class="Other">(</span><span class="Identifier">maxInflightComputations</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">logLevel</span> <span class="Other">=</span> <span class="Identifier">Warning</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">XLAError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteEnvEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Create a new client for running computations on Google TPU accelerator.  

</dd>
</div>
<div id="platformName,Client">
<dt><pre><span class="Keyword">proc</span> <a href="#platformName%2CClient"><span class="Identifier">platformName</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns name of platform (CPU or Cuda)

</dd>
</div>
<div id="platformVersion,Client">
<dt><pre><span class="Keyword">proc</span> <a href="#platformVersion%2CClient"><span class="Identifier">platformVersion</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="nimxla.html#Client"><span class="Identifier">Client</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns version of platform (e.g. Cuda version)

</dd>
</div>
<div id="run,Executable">
<dt><pre><span class="Keyword">proc</span> <a href="#run%2CExecutable"><span class="Identifier">run</span></a><span class="Other">(</span><span class="Identifier">exec</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a><span class="Other">;</span> <span class="Identifier">checkShape</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">XLAError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Convenience method for use where the executable does not take any input arguments. As per exec.run(args).

</dd>
</div>
<div id="run,Executable,openArray[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#run%2CExecutable%2CopenArray%5BT%5D"><span class="Identifier">run</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a> <span class="Operator">|</span> <a href="nimxla/tensor.html#Literal"><span class="Identifier">Literal</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">exec</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span>
                              <span class="Identifier">checkShape</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a></pre></dt>
<dd>

Pass the given literal or buffer arguments to the executable, launch the kernel on the associated device and return a single buffer with the results. i.e. tuple results are not unpacked. By default will check that the data type and shape of the parameters matches the inputs and raise an exception if there is a mismatch. Set checkShape to false to only have the runtime check the size of the input buffers.

</dd>
</div>
<div id="runAndUnpack,Executable">
<dt><pre><span class="Keyword">proc</span> <a href="#runAndUnpack%2CExecutable"><span class="Identifier">runAndUnpack</span></a><span class="Other">(</span><span class="Identifier">exec</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a><span class="Other">;</span> <span class="Identifier">checkShape</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">XLAError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Convenience method for use where the executable returns a tuple of results but does not take any input arguments. As per runAndUnpack(args)

</dd>
</div>
<div id="runAndUnpack,Executable,openArray[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#runAndUnpack%2CExecutable%2CopenArray%5BT%5D"><span class="Identifier">runAndUnpack</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a> <span class="Operator">|</span> <a href="nimxla/tensor.html#Literal"><span class="Identifier">Literal</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">exec</span><span class="Other">:</span> <a href="nimxla.html#Executable"><span class="Identifier">Executable</span></a><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span>
                                       <span class="Identifier">checkShape</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">]</span></pre></dt>
<dd>

For use where the executable returns a tuple of results. Passes the given literal or buffer arguments to the executable, launches the kernel on the associated device and returns a list of buffers unpacked from the returned tuple. By default will check that the data type and shape of the parameters matches the inputs and raise an exception if there is a mismatch. Set checkShape to false to only have the runtime check the size of the input buffers.

</dd>
</div>
<div id="setLogLevel,LogLevel">
<dt><pre><span class="Keyword">proc</span> <a href="#setLogLevel%2CLogLevel"><span class="Identifier">setLogLevel</span></a><span class="Other">(</span><span class="Identifier">level</span><span class="Other">:</span> <a href="nimxla.html#LogLevel"><span class="Identifier">LogLevel</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteEnvEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Set the log level used by the Tensorflow XLA library - defaults to Info

</dd>
</div>
<div id="shape,Buffer">
<dt><pre><span class="Keyword">proc</span> <a href="#shape%2CBuffer"><span class="Identifier">shape</span></a><span class="Other">(</span><span class="Identifier">buf</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">)</span><span class="Other">:</span> <a href="nimxla/tensor.html#Shape"><span class="Identifier">Shape</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Get the data type and dimenstions for the buffer.

</dd>
</div>
<div id="toLiteral,Buffer">
<dt><pre><span class="Keyword">proc</span> <a href="#toLiteral%2CBuffer"><span class="Identifier">toLiteral</span></a><span class="Other">(</span><span class="Identifier">buf</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">)</span><span class="Other">:</span> <a href="nimxla/tensor.html#Literal"><span class="Identifier">Literal</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">XLAError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Copy buffer from device to literal on host

</dd>
</div>
<div id="toLiterals,openArray[Buffer]">
<dt><pre><span class="Keyword">proc</span> <a href="#toLiterals%2CopenArray%5BBuffer%5D"><span class="Identifier">toLiterals</span></a><span class="Other">(</span><span class="Identifier">buffers</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="nimxla/tensor.html#Literal"><span class="Identifier">Literal</span></a><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">XLAError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Copy list of buffers back to host

</dd>
</div>
<div id="toTensor,Buffer">
<dt><pre><span class="Keyword">proc</span> <a href="#toTensor%2CBuffer"><span class="Identifier">toTensor</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="nimxla/tensor.html#ElemType"><span class="Identifier">ElemType</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">buf</span><span class="Other">:</span> <a href="nimxla.html#Buffer"><span class="Identifier">Buffer</span></a><span class="Other">)</span><span class="Other">:</span> <a href="nimxla/tensor.html#Tensor"><span class="Identifier">Tensor</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
<dd>

Copy buffer from device to tensor on host Will raise an XLAError exception if the data type of source and destination do not match.

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2023-05-31 15:21:02 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
